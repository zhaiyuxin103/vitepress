import{_ as e,o,c as a,S as s}from"./chunks/framework.8b0da900.js";const l="/vitepress/images/切换IAM角色（AWS-CLI）/profile.png",c="/vitepress/images/切换IAM角色（AWS-CLI）/file.png",i="/vitepress/images/切换IAM角色（AWS-CLI）/used.png",r="/vitepress/images/切换IAM角色（AWS-CLI）/alias.png",n="/vitepress/images/切换IAM角色（AWS-CLI）/default.png",C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"programe/切换 IAM 角色（AWS CLI）.md","filePath":"programe/切换 IAM 角色（AWS CLI）.md","lastUpdated":1682097564000}'),t={name:"programe/切换 IAM 角色（AWS CLI）.md"},p=s('<h2 id="配置多个-profile" tabindex="-1">配置多个 Profile <a class="header-anchor" href="#配置多个-profile" aria-label="Permalink to &quot;配置多个 Profile&quot;">​</a></h2><ol><li><p>使用命名配置文件：<code>aws configure --profile &lt;profile-name&gt;</code></p></li><li><p>依次输入 <code>AWS Access Key ID</code>、<code>AWS Secret Access Key</code>、<code>region name</code>、<code>output format</code> 即可完成配置 <img src="'+l+'" alt="file"></p></li><li><p>此时生成的 <code>config</code> 和 <code>credentials</code> 文件中，会使用 <code>profile-name</code> 来区分不同的配置 <img src="'+c+'" alt="file"></p></li></ol><h2 id="使用多个-profile" tabindex="-1">使用多个 Profile <a class="header-anchor" href="#使用多个-profile" aria-label="Permalink to &quot;使用多个 Profile&quot;">​</a></h2><h3 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to &quot;基本用法&quot;">​</a></h3><ol><li><p>命令后面加上参数 <code>--profile &lt;profile_name&gt;</code> 即可使用 <code>profile_name</code> 对应的 <code>profile</code></p></li><li><p>如下命令使用 <code>Record China</code> 的 <code>profile</code> 来查看 <code>S3</code> 下的 <code>bucket list</code><img src="'+i+'" alt="file"></p></li></ol><h3 id="简化" tabindex="-1">简化 <a class="header-anchor" href="#简化" aria-label="Permalink to &quot;简化&quot;">​</a></h3><ol><li>每次输入 <code>--profile &lt;profile_name&gt;</code> 是很繁琐的事情，在 <code>Mac</code> 或 <code>Linux</code> 下，可以使用 <code>alias</code> 来简化</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-light"><code><span class="line"><span style="color:#D73A49;">alias</span><span style="color:#24292E;"> aws_Record-China</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;aws --profile Record-China&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li><p>之后每次使用的时候，直接使用 <code>aws_Record-China</code> 来使用 <code>Record-China</code> 的 <code>profile</code> 运行 <code>aws</code> 命令</p></li><li><p>以下命令设置 <code>aws_Record-China</code> 为使用 <code>Record-China</code> 的 <code>profile</code> 来运行 <code>aws</code> 命令 <img src="'+r+'" alt="file"></p></li><li><p>添加到 <code>~/.zshrc</code> 中使得 <code>alias</code> 永久生效</p></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-light"><code><span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;alias aws_Record-China=&#39;aws --profile Record-China&#39;&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="设置默认的-profile" tabindex="-1">设置默认的 Profile <a class="header-anchor" href="#设置默认的-profile" aria-label="Permalink to &quot;设置默认的 Profile&quot;">​</a></h2><ol><li>如果有一个账号是使用的比较频繁的，而不想每次都使用 <code>alias</code> 的方式来运行 <code>aws</code> 命令，也可以设置环境变量 <code>AWS_DEFAULT_PROFILE</code> 为频繁使用的账号名，此时输入 <code>aws </code>时候，会自动使用指定的账号配置</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> AWS_DEFAULT_PROFILE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">Record-China</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li><p>运行结果如下: <img src="'+n+'" alt="file"></p></li><li><p>添加到 <code>~/.zshrc</code> 中来使 <code>AWS_DEFAULT_PROFILE</code> 永久生效</p></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-light"><code><span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;export AWS_DEFAULT_PROFILE=Record-China&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>本文参考自：</p><ol><li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html#cli-configure-profiles-create" target="_blank" rel="noreferrer">AWS Command Line Interface Documentation</a></li><li><a href="https://www.jibing57.com/2017/10/24/how-to-use-aws-cli-with-multi-user/" target="_blank" rel="noreferrer">如何在 aws cli 中使用多个配置文件</a></li></ol></div>',16),d=[p];function h(u,m,_,f,g,b){return o(),a("div",null,d)}const y=e(t,[["render",h]]);export{C as __pageData,y as default};
